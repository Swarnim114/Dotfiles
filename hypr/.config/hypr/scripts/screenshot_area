#!/usr/bin/bash
SCREENSHOT_DIR="$HOME/Pictures/Screenshots"
mkdir -p "$SCREENSHOT_DIR"
FILENAME="$SCREENSHOT_DIR/screenshot-$(date +%Y%m%d-%H%M%S).png"

# Take screenshot directly with grim and pipe to swappy
grim -g "$(slurp)" - | swappy -f - -o "$FILENAME"

if [ -f "$FILENAME" ]; then
    # Copy to clipboard
    wl-copy < "$FILENAME"
    notify-send "Screenshot saved" "Saved to $FILENAME and copied to clipboard" -i "$FILENAME"
else
    notify-send "Screenshot failed" "Failed to capture screenshot" -u critical
fi
